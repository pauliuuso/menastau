<div class="row mb-5">
    <div class="col-12 col-md-10 col-lg-8 col-xl-6">

        <h4>Sign up:</h4>
        <form [formGroup]="form" (ngSubmit)="CreateUser()" class="mt-3" novalidate>

          <div class="form-group"
            [ngClass]="{
              'has-danger': name.touched && name.invalid,
              'has-success': name.touched && name.valid
            }"
          >
            <label for="name">*Name:</label>
            <input name="name" type="text" class="form-control" formControlName="name" maxlength="20">
            <div class="form-control-feedback" *ngIf="name.touched && name.invalid">
              <p *ngIf="name.errors.required">This field is mandatory!</p>
              <p *ngIf="name.errors.pattern">Name has unsupported symbols!</p>
              <p *ngIf="name.errors.minlength || validatorService.MaxLength(name.value, 20)">Name has to have more than 1 and less than 20 characters!</p>
            </div>
          </div>

          <div class="form-group"
            [ngClass]="{
              'has-danger': surname.touched && surname.invalid,
              'has-success': surname.touched && surname.valid
            }"
          >
            <label for="surname">*Surname:</label>
            <input name="surname" type="text" class="form-control" formControlName="surname" maxlength="50">
            <div class="form-control-feedback" *ngIf="surname.touched && surname.invalid">
              <p *ngIf="surname.errors.required">This field is mandatory!</p>
              <p *ngIf="surname.errors.pattern">Name has unsupported symbols!</p>
              <p *ngIf="surname.errors.minlength || validatorService.MaxLength(surname.value, 50)">Surname has to have more than 1 and less than 50 characters!</p>
            </div>
          </div>

          <div class="form-group"
          [ngClass]="{
            'has-danger': email.touched && email.invalid,
            'has-success': email.touched && email.valid
          }"
          >
            <label for="email">*Email:</label>
            <input name="email" type="text" class="form-control" placeholder="Enter your email" formControlName="email" maxlength="50">
            <div class="form-control-feedback" *ngIf="email.touched && email.invalid">
              <p *ngIf="email.errors.required">This field is mandatory!</p>
              <p *ngIf="email.errors.pattern">This is not a valid email!</p>
              <p *ngIf="email.errors.minlength || validatorService.MaxLength(email.value, 50)">Email has to have more than 1 and less than 50 characters!</p>
            </div>
          </div>

          <div class="form-group"
          [ngClass]="{
            'has-danger': password1.touched && password1.invalid,
            'has-success': password1.touched && password1.valid
          }"
          >
            <label for="password1">*Password:</label>
            <input name="password1" type="password" class="form-control" placeholder="Enter your password" formControlName="password1" maxlength="50">
            <div class="form-control-feedback" *ngIf="password1.touched && password1.invalid">
              <p *ngIf="password1.errors.required">This field is mandatory!</p>
              <p *ngIf="password1.errors.pattern">Password has unsupported characters!</p>
              <p *ngIf="password1.errors.minlength || validatorService.MaxLength(password1.value, 50)">Password has to have more than 3 and less than 50 characters!</p>
            </div>
          </div>

          <div class="form-group mb-4"
          [ngClass]="{
            'has-danger': (password2.touched && password2.invalid) || (password2.touched && !validatorService.Match(password1.value, password2.value)),
            'has-success': password2.touched && password2.valid
          }"
          >
            <label for="password2">*Repeat your password:</label>
            <input name="password2" type="password" class="form-control" placeholder="Repeat your password" formControlName="password2" maxlength="50">
            <div class="form-control-feedback" *ngIf="password2.touched && password2.invalid">
              <p *ngIf="password2.errors.required">This field is mandatory!</p>
              <p *ngIf="password2.errors.pattern">Password has unsupported characters!</p>
              <p *ngIf="password2.errors.minlength || validatorService.MaxLength(password2.value, 50)">Password has to have more than 3 and less than 50 characters!</p>
            </div>
            <div class="form-control-feedback">
              <p *ngIf="password2.dirty && password2.touched && !validatorService.Match(password1.value, password2.value)">Passwords doesn't match!</p>
            </div>
          </div>

          <button type="submit" class="btn btn-primary" [ngClass]="{'btn-disabled': isUploading, 'btn-primary': !isUploading}" [disabled]="isUploading">Submit</button>
          <div [ngClass]="{'hidden-xs-up': !isUploading}"><i class="fa fa-spinner fa-spin"></i></div>
          <p class="text-danger mt-2">{{errorMessage}}</p>

        </form>
    </div>
</div>
